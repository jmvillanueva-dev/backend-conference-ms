generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Database models
model Usuario {
  id        Int      @id @default(autoincrement())
  nombre    String   @db.VarChar(30)
  apellido  String   @db.VarChar(20)
  email     String   @unique @db.VarChar(30)
  password  String   @db.VarChar(200)
  isActive  Boolean  @default(false)
  createdAt DateTime @default(now()) @map("fecha_creacion")
  updatedAt DateTime @updatedAt @map("fecha_actualizacion")

  @@map("usuarios")
}

model Materia {
  id          Int     @id @default(autoincrement())
  nombre      String  @db.VarChar(20)
  codigo      String  @db.VarChar(20)
  descripcion String? @db.VarChar(20)
  creditos    String  @db.VarChar(10)

  matriculas Matricula[]

  @@map("materias")
}

model Estudiante {
  id              Int    @id @default(autoincrement())
  nombre          String @db.VarChar(20)
  apellido        String @db.VarChar(20)
  cedula          String @db.VarChar(20)
  fechaNacimiento String @map("fecha_nacimiento") @db.VarChar(20)
  ciudad          String @db.VarChar(20)
  direccion       String @db.VarChar(10)
  telefono        String @db.VarChar(20)
  email           String @db.VarChar(20)

  matriculas Matricula[]

  @@map("estudiantes")
}

model Matricula {
  id          Int    @id @default(autoincrement())
  codigo      Int
  descripcion String @db.VarChar(20)

  estudianteId Int        @map("estudiante_id")
  estudiante   Estudiante @relation(fields: [estudianteId], references: [id])

  materiaId Int     @map("materia_id")
  materia   Materia @relation(fields: [materiaId], references: [id])

  @@map("matriculas")
}
